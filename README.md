# CF Sub Converter

åŸºæ–¼ Cloudflare Workers çš„ Serverless è¨‚é–±è½‰æ›å·¥å…·ã€‚ç„¡éœ€è³¼è²· VPSï¼Œä¾è¨— Cloudflare å…¨çƒé‚Šç·£ç¶²çµ¡ï¼Œæä¾›é«˜æ€§èƒ½ã€éš±ç§å®‰å…¨çš„è¨‚é–±è½‰æ›æœå‹™ã€‚

[![Deploy to Cloudflare Workers](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/sammy0101/cf-sub-converter)

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

*   â˜ï¸ **Serverless éƒ¨ç½²**ï¼šå®Œå…¨é‹è¡Œåœ¨ Cloudflare Workers ä¸Šï¼Œç„¡éœ€ç¶­è­· VPSï¼Œé›¶æˆæœ¬é‹ç¶­ã€‚
*   ğŸ›¡ï¸ **éš±ç§å®‰å…¨**ï¼šä»£ç¢¼é–‹æºï¼Œæ‰€æœ‰è½‰æ›é‚è¼¯åœ¨é‚Šç·£ç¯€é»å®Œæˆï¼Œä¸è¨˜éŒ„ä»»ä½•ç”¨æˆ¶æ—¥èªŒã€‚
*   âš¡ **é«˜æ€§èƒ½**ï¼šåˆ©ç”¨ Cloudflare å…¨çƒç¶²çµ¡ï¼Œæ¥µä½å»¶é²ï¼ŒéŸ¿æ‡‰é€Ÿåº¦å¿«ã€‚
*   ğŸ”„ **å¤šå”è­°æ”¯æŒ**ï¼šå®Œç¾æ”¯æŒ **Clash**, **V2Ray**, **Sing-box** ç­‰ä¸»æµå®¢æˆ¶ç«¯æ ¼å¼è½‰æ›ã€‚

## ğŸš¦ æ™ºèƒ½åˆ†æµç­–ç•¥ (Routing)

æœ¬å·¥å…·é è¨­å…§ç½®äº†ç²¾ç´°åŒ–çš„åˆ†æµè¦å‰‡ï¼Œæ»¿è¶³å¤§å¤šæ•¸ç”¨æˆ¶çš„æ—¥å¸¸éœ€æ±‚ï¼š

| åœ–æ¨™ | è¦å‰‡çµ„åç¨± | èªªæ˜ |
| :--- | :--- | :--- |
| ğŸ’¬ | **é¦™æ¸¯AI æœå‹™** | å°ˆç‚º ChatGPT, Claude ç­‰ AI æœå‹™å„ªåŒ–ï¼Œç¢ºä¿è¨ªå•ç©©å®šã€‚ |
| ğŸŒ | **éä¸­åœ‹** | åœ‹å¤–é€šç”¨æµé‡ï¼Œè‡ªå‹•é¸æ“‡æœ€å¿«ç¯€é»ã€‚ |
| ğŸ”’ | **åœ‹å…§æœå‹™** | ä¸­åœ‹å¤§é™¸æµé‡ï¼Œè‡ªå‹•ç›´é€£ï¼Œä¸æ¶ˆè€—ä»£ç†æµé‡ã€‚ |
| ğŸ  | **ç§æœ‰ç¶²çµ¡** | å±€åŸŸç¶²åŠç§æœ‰ IP åœ°å€è¨ªå•ã€‚ |
| ğŸ›‘ | **å»£å‘Šæ””æˆª** | è‡ªå‹•æ””æˆªå¸¸è¦‹å»£å‘ŠåŸŸåã€‚ |
| ğŸŸ | **æ¼ç¶²ä¹‹é­š** | æœªåŒ¹é…åˆ°ä¸Šè¿°è¦å‰‡çš„å…¶ä»–æ‰€æœ‰æµé‡ (Final)ã€‚ |

## ğŸš€ éƒ¨ç½²æ•™ç¨‹ (Deployment)

å»ºè­°æŒ‰ç…§ä»¥ä¸‹é †åºæ“ä½œï¼Œä»¥ç¢ºä¿åŠŸèƒ½å®Œæ•´ï¼š

### ç¬¬ä¸€æ­¥ï¼šFork æœ¬é …ç›®
é»æ“Šé é¢å³ä¸Šè§’çš„ **[Fork]** æŒ‰éˆ•ï¼Œå°‡æœ¬å€‰åº«è¤‡è£½åˆ°æ‚¨è‡ªå·±çš„ GitHub å¸³è™Ÿä¸‹ã€‚
> **é‡è¦**ï¼šå¿…é ˆ Forkï¼Œå¦å‰‡å¾ŒçºŒç„¡æ³•é…ç½®è‡ªå‹•æ›´æ–°å’Œè‡ªå®šç¾©è¦å‰‡ã€‚

### ç¬¬äºŒæ­¥ï¼šæº–å‚™å¿…è¦åƒæ•¸
åœ¨éƒ¨ç½²å‰ï¼Œè«‹å…ˆç²å–ä»¥ä¸‹ 3 å€‹ Cloudflare åƒæ•¸ï¼š

| è®Šé‡å | ç²å–æ–¹å¼ |
| :--- | :--- |
| `CF_ACCOUNT_ID` | Cloudflare æ§åˆ¶å°é¦–é ç¶²å€æ¬„ä¸­çš„ä¸€ä¸²å­—ç¬¦ï¼Œæˆ–å³å´é‚Šæ¬„å¯è¦‹ã€‚ |
| `CF_API_TOKEN` | åœ¨ "My Profile" -> "API Tokens" å‰µå»ºï¼Œéœ€çµ¦äºˆ **Edit Cloudflare Workers** æ¬Šé™ã€‚ |
| `CF_KV_ID` | åœ¨ Workers èœå–®ä¸‹å‰µå»ºä¸€å€‹ KV Namespace (ä¾‹å¦‚å‘½åç‚º `sub_cache`) ä¸¦ç²å–å…¶ IDã€‚ |

### ç¬¬ä¸‰æ­¥ï¼šä¸€éµéƒ¨ç½² (åˆæ¬¡å®‰è£)
å›åˆ°æ‚¨ Fork å¾Œçš„å€‰åº«é é¢ï¼Œé»æ“Šä¸Šæ–¹çš„ **Deploy to Cloudflare Workers** æŒ‰éˆ•ã€‚
1.  æˆæ¬Š Cloudflare è¨ªå•æ‚¨çš„ GitHubã€‚
2.  åœ¨ Cloudflare éƒ¨ç½²é é¢ä¸­ï¼Œ**å¡«å¯«ç¬¬äºŒæ­¥ç²å–çš„åƒæ•¸**ã€‚
3.  é»æ“Š Deployã€‚

---

## ğŸ¤– é…ç½®è‡ªå‹•æ›´æ–° (GitHub Actions)

å¦‚æœæ‚¨å¸Œæœ›**æ¯æ¬¡ä¿®æ”¹ä»£ç¢¼å¾Œè‡ªå‹•æ›´æ–°**åˆ° Cloudflareï¼Œæ‚¨éœ€è¦å°‡ä¸Šè¿°åƒæ•¸æ·»åŠ åˆ° GitHub Secrets ä¸­ï¼š

1.  é€²å…¥ GitHub å€‰åº«çš„ **Settings** -> **Secrets and variables** -> **Actions**ã€‚
2.  é»æ“Š **New repository secret**ã€‚
3.  ä¾æ¬¡æ·»åŠ ä»¥ä¸‹è®Šé‡ï¼š
    *   `CF_ACCOUNT_ID`
    *   `CF_API_TOKEN`
    *   `CF_KV_ID` (å¯é¸ï¼Œè¦– `wrangler.toml` é…ç½®è€Œå®š)

é€™æ¨£è¨­ç½®å¾Œï¼Œæ¯æ¬¡æ‚¨ `git push` ä»£ç¢¼ï¼ŒGitHub Actions å°±æœƒè‡ªå‹•å¹«æ‚¨éƒ¨ç½²æœ€æ–°çš„ Workerã€‚

## ğŸ“– ä½¿ç”¨æ–¹æ³•

éƒ¨ç½²æˆåŠŸå¾Œï¼Œæ‚¨å°‡ç²å¾—ä¸€å€‹é¡ä¼¼ `https://your-worker.your-name.workers.dev` çš„åœ°å€ã€‚

### é€šç”¨ URL æ ¼å¼
```
https://<æ‚¨çš„åŸŸå>/sub?target=<ç›®æ¨™å®¢æˆ¶ç«¯>&url=<åŸå§‹è¨‚é–±éˆæ¥>
```

### åƒæ•¸èªªæ˜
*   `target`: ç›®æ¨™å®¢æˆ¶ç«¯é¡å‹ (æ”¯æŒ `clash`, `v2ray`, `sing-box`, `surge`)
*   `url`: æ‚¨çš„åŸå§‹è¨‚é–±éˆæ¥ (å¤šå€‹éˆæ¥è«‹ç”¨ `|` åˆ†éš”ï¼Œå»ºè­°é€²è¡Œ URL Encode)
*   `config`: (å¯é¸) è‡ªå®šç¾©é ç¨‹è¦å‰‡é…ç½®æ–‡ä»¶ URL
*   `list`: (å¯é¸) `true` å‰‡åƒ…è¼¸å‡ºç¯€é»åˆ—è¡¨ï¼Œä¸è¼¸å‡ºè¦å‰‡

### ç¤ºä¾‹ (Clash)
```
https://cf-sub-converter.sammy.workers.dev/sub?target=clash&url=https%3A%2F%2Fexample.com%2Fapi%2Fv1%2Fsub
```

## ğŸ› ï¸ æœ¬åœ°é–‹ç™¼

å¦‚æœæ‚¨æ˜¯é–‹ç™¼è€…ï¼Œå¸Œæœ›åœ¨æœ¬åœ°èª¿è©¦ä»£ç¢¼ï¼š

```bash
# 1. å…‹éš†å€‰åº«
git clone https://github.com/sammy0101/cf-sub-converter.git
cd cf-sub-converter

# 2. å®‰è£ä¾è³´
npm install

# 3. å•Ÿå‹•æœ¬åœ°æœå‹™
npm run dev
```

## âš ï¸ å…è²¬è²æ˜

*   æœ¬é …ç›®åƒ…ä¾›äº’è¯ç¶²æŠ€è¡“å­¸ç¿’å’Œç ”ç©¶ä½¿ç”¨ã€‚
*   è«‹å‹¿å°‡æœ¬é …ç›®ç”¨æ–¼ä»»ä½•é•åç•¶åœ°æ³•å¾‹æ³•è¦çš„ç”¨é€”ã€‚
*   ä½œè€…ä¸å°ä½¿ç”¨æœ¬é …ç›®ç”¢ç”Ÿçš„ä»»ä½•å¾Œæœè² è²¬ã€‚
